<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0"/>
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"/>
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="http://handygeospatial.github.io/mapsites/js/leaflet-hash.js"></script>
<script src="http://handygeospatial.github.io/mapsites/js/TileLayer.GeoJSON.js"></script>
<script src="http://handygeospatial.github.io/mapsites/js/corslite.js"></script>
<style>
body {padding: 0; margin: 0}
html, body, #mapdiv {height: 100%; width: 100%;}
.leaflet-container {background: #fff;}
.高速自動車国道等 {stroke: #22cb6d; stroke-width: 15;}
.国道 {stroke: #ff696e; stroke-width: 15;}
.都道府県道 {stroke: #fcff00; stroke-width: 15;}
.市区町村道等 {stroke: #cccccc; stroke-width: 5;}
</style>
</head>
<body>
<div id="mapdiv">
<script>
var std = L.tileLayer(
'http://cyberjapandata-t{s}.gsi.go.jp/xyz/std/{z}/{x}/{y}.png', {
  attribution: "地理院タイル（標準地図）",
  subdomains: '123', maxNativeZoom: 18, maxZoom: 20, opacity: 1
});
var ort = L.tileLayer(
'http://cyberjapandata-t{s}.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg', {
  attribution: "地理院タイル（オルソ画像）",
  subdomains: '123', maxNativeZoom: 17, maxZoom: 20, opacity: 1
});

var rdcl = new L.TileLayer.GeoJSON(
'http://cyberjapandata-t{s}.gsi.go.jp/xyz/experimental_rdcl/{z}/{x}/{y}.geojson', {
  attribution: "地理院ベクトルタイル提供実験（道路中心線）" +
  "<a target='blank' href='http://gsi-cyberjapan.github.io/" +
  "vector-tile-experiment/DataSpecification.html'>仕様</a>",
  subdomains: '123', minZoom: 14, maxNativeZoom: 16, maxZoom: 20,
}, {
  style: function(feature) {
    if(!feature) return style; // FIXME, SOMETHING MIGHT BE WRONG
    var style = {color: '#0ff', opacity: 0.5};
    style.className = feature.properties.rdCtg;
    return style;
  }, 
  onEachFeature: function(feature, layer) {
    var popupString = '';
    for (var k in feature.properties) {
      popupString += k + ': ' + feature.properties[k] + '<br/>';
    }
    layer.bindPopup(popupString);
    layer.on('mouseover', function() {});
    layer.on('mouseout', function() {});
  }
});

var map = L.map('mapdiv', {
  center: [36.32033, 139.07212], zoom: 17,
  layers: [rdcl, ort]});

var hash = L.hash(map);
L.control.layers({}, {
  '地理院タイル（標準地図）': std,
  '地理院タイル（オルソ画像）': ort,
  '地理院ベクトルタイル提供実験（道路中心線）': rdcl
}).addTo(map);
</script>
</body>
</html>
