<!doctype html>
<html>
<head>
  <meta charset='UTF-8'>
  <meta name="viewport" 
   content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" 
   content="black-translucent" />
  <title>国土数値情報（地価公示）</title>
  <link rel='stylesheet' href='http://leafletjs.com/dist/leaflet.css'>
  <script src='http://leafletjs.com/dist/leaflet.js'></script>
  <script src="leaflet-hash.js"></script>
  <script src="TileLayer.GeoJSON.js"></script>
  <style>
  html, body, #mapdiv {margin: 0; padding: 0; width: 100%; height: 100%;}
  </style>
</head>
<body>
  <div id='mapdiv'/>
  <script>
function render_properties(prop) {
  var s = '';
  s += '<h3>' + prop['L01_019'] + '</h3>';
  s += '【公示価格】' + prop['L01_006'] + '円/m2 (' + 
    prop['L01_005'] + '年度)<br>';
  s += '【地積】 ' + prop['L01_020'] + 'm2<br>';
  s += '【利用現況】 ' + prop['L01_021']+ '<br>';
  s += '【建物構造】 ' + prop['L01_023']+ '<br>';
  s += '【法規制】 ' + prop['L01_029'] + '<br>';
  s += '【建ぺい率】 ' + prop['L01_030'] + '%<br>';
  s += '【容積率】 ' + prop['L01_031'] + '%<br><br>';
  s += '最寄り' + prop['L01_027'] + '駅から' + prop['L01_028'] + 'm<br>';
  s += (prop['L01_024'] ? '○' : '×') + ' 水道供給 ';
  s += (prop['L01_025'] ? '○' : '×') + ' ガス供給 ';
  s += (prop['L01_026'] ? '○' : '×') + ' 下水供給<br>';
  return s;
}

icon = L.icon({
  iconUrl: 'http://cyberjapan.jp/symbols/090.bmp', iconSize: [16, 16]});
map = new L.Map('mapdiv', {zoom: 16, center: [35.6762, 139.7653]});
hash = new L.Hash(map);
map.addLayer(new L.TileLayer(
  'http://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png',
  {attribution: '地理院タイル', minZoom: 0, maxZoom: 14}));
map.addLayer(new L.TileLayer(
  'http://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png',
  {attribution: '地理院タイル', minZoom: 15, maxZoom: 18}));
map.addLayer(new L.TileLayer.GeoJSON(
  'http://www.handygeospatial.info/2014/01/22/{z}/{x}/{y}.geojson',
  {attribution: '国土数値情報（地価公示）', unloadInvisibleTiles: true,
   minZoom: 14, maxZoom: 18},
  {style: {"clickable": true},
   onEachFeature: function(feature, layer) {
     layer.bindPopup(render_properties(feature.properties));
     layer.setIcon(icon);
   }
  }));
  </script>
</body>
</html> 

